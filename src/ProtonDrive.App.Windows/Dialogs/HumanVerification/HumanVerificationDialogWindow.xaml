<windows:CustomChromeWindow
    x:Class="ProtonDrive.App.Windows.Dialogs.HumanVerification.HumanVerificationDialogWindow"
    x:ClassModifier="internal"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:b="http://schemas.microsoft.com/xaml/behaviors"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:humanVerification="clr-namespace:ProtonDrive.App.Windows.Dialogs.HumanVerification"
    xmlns:loc="clr-namespace:ProtonDrive.App.Windows.Resources"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:windows="clr-namespace:ProtonDrive.App.Windows.Toolkit.Windows"
    xmlns:wpf="clr-namespace:Microsoft.Web.WebView2.Wpf;assembly=Microsoft.Web.WebView2.Wpf"
    Title="{loc:Resource Main_Window_Title}"
    ResizeMode="CanResize"
    Style="{StaticResource DialogStyle}"
    WindowStartupLocation="CenterScreen"
    MinHeight="600"
    mc:Ignorable="d"
    d:DataContext="{d:DesignInstance humanVerification:HumanVerificationDialogViewModel}">
    <b:Interaction.Triggers>
        <b:DataTrigger
            Binding="{Binding VerificationTokenReceived, Mode=OneWay}"
            Value="True">
            <b:CallMethodAction
                MethodName="Close"
                TargetObject="{Binding RelativeSource={RelativeSource AncestorType={x:Type Window}}}" />
        </b:DataTrigger>
    </b:Interaction.Triggers>

    <DockPanel Background="White">
        <wpf:WebView2
            Name="WebView2"
            Source="{Binding Url, Mode=OneWay}"
            Width="420"
            Height="{Binding Height, Mode=OneWay}"
            MinHeight="100"
            Margin="0,20,0,0">
            <b:Interaction.Triggers>
                <b:EventTrigger EventName="WebMessageReceived">
                    <b:InvokeCommandAction
                        Command="{Binding Mode=OneWay, Path=OnMessageReceivedCommand}"
                        PassEventArgsToCommand="True" />
                </b:EventTrigger>
            </b:Interaction.Triggers>
        </wpf:WebView2>
    </DockPanel>
</windows:CustomChromeWindow>
