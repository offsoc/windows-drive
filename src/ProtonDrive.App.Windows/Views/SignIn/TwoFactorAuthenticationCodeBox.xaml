<UserControl
    x:Class="ProtonDrive.App.Windows.Views.SignIn.TwoFactorAuthenticationCodeBox"
    x:ClassModifier="internal"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:po="http://schemas.microsoft.com/winfx/2006/xaml/presentation/options"
    xmlns:signIn="clr-namespace:ProtonDrive.App.Windows.Views.SignIn"
    mc:Ignorable="d"
    d:DataContext="{d:DesignInstance signIn:SecondFactorInputViewModel}">
    <UserControl.Resources>
        <SolidColorBrush
            x:Key="Totp.TextBox.Background"
            po:Freeze="True"
            Color="#222027" />

        <SolidColorBrush
            x:Key="Totp.TextBox.Focused.Background"
            po:Freeze="True"
            Color="#45434A" />

        <Style
            TargetType="TextBox"
            BasedOn="{StaticResource {x:Type TextBox}}">
            <Setter Property="Background" Value="{StaticResource Totp.TextBox.Background}" />
            <Setter Property="BorderBrush" Value="{StaticResource Totp.TextBox.Background}" />
            <Setter Property="MaxLength" Value="1" />
            <Setter Property="Width" Value="42" />
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="BorderThickness" Value="0,0,0,2" />
                </Trigger>

                <Trigger Property="IsFocused" Value="True">
                    <Setter Property="Background" Value="{StaticResource Totp.TextBox.Focused.Background}" />
                    <Setter Property="BorderThickness" Value="0,0,0,2" />
                </Trigger>

                <DataTrigger
                    Binding="{Binding (Validation.HasError), RelativeSource={RelativeSource AncestorType=UserControl}}"
                    Value="True">
                    <Setter Property="BorderBrush" Value="{StaticResource NegativeBrush}" />
                    <Setter Property="BorderThickness" Value="1" />
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </UserControl.Resources>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition />
            <ColumnDefinition />
            <ColumnDefinition />
            <ColumnDefinition Width="24" />
            <ColumnDefinition />
            <ColumnDefinition />
            <ColumnDefinition />
        </Grid.ColumnDefinitions>

        <TextBox
            Name="Digit0"
            AutomationProperties.AutomationId="TwoFactorCodeTextBox"
            Grid.Column="0"
            TextAlignment="Center"
            HorizontalAlignment="Left">
            <TextBox.Style>
                <Style
                    TargetType="TextBox"
                    BasedOn="{StaticResource {x:Type TextBox}}">
                    <Style.Triggers>
                        <DataTrigger
                            Binding="{Binding RequestTotpCodeFocus}"
                            Value="True">
                            <Setter Property="FocusManager.FocusedElement" Value="{Binding RelativeSource={RelativeSource Self}}" />
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </TextBox.Style>
        </TextBox>

        <TextBox
            Name="Digit1"
            Grid.Column="1"
            TextAlignment="Center"
            HorizontalAlignment="Left" />

        <TextBox
            Name="Digit2"
            Grid.Column="2"
            TextAlignment="Center"
            HorizontalAlignment="Left" />

        <TextBlock
            Grid.Column="3"
            Text="-"
            FontWeight="Bold"
            HorizontalAlignment="Center"
            VerticalAlignment="Center" />

        <TextBox
            Name="Digit3"
            Grid.Column="4"
            TextAlignment="Center"
            HorizontalAlignment="Right" />

        <TextBox
            Name="Digit4"
            Grid.Column="5"
            TextAlignment="Center"
            HorizontalAlignment="Right" />

        <TextBox
            Name="Digit5"
            Grid.Column="6"
            TextAlignment="Center"
            HorizontalAlignment="Right" />
    </Grid>
</UserControl>

